<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Payroll Deduction Meal Coupon</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #224889;
      color: white;
      text-align: center;
    }

    img.logo {
      max-width: 100px;
      margin: 20px auto;
      display: block;
    }

    h1 {
      font-size: 28px;
      margin: 0;
    }

    h2 {
      font-size: 18px;
      margin-top: 20px;
      font-weight: normal;
    }

    .button-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 15px auto 25px;
      max-width: 400px;
    }

    .main-button {
      background-color: #0C234C;
      color: white;
      padding: 12px 20px;
      border: 2px solid #0C234C;
      border-radius: 12px;
      font-size: 16px;
      font-weight: normal;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      transition: background-color 0.2s ease, transform 0.1s ease;
      flex: 1 1 calc(50% - 10px);
      min-width: 140px;
    }

    .main-button:hover {
      background-color: #143869;
    }

    .main-button:active {
      transform: scale(0.97);
    }

    .authorization-box {
      border: 2px solid #0C234C;
      border-radius: 12px;
      padding: 15px;
      margin: 30px auto;
      max-width: 600px;
      background-color: #224889;
      color: white;
      font-size: 12px;
      text-align: center;
    }

    .search-bar-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 20px auto;
      gap: 10px;
      flex-wrap: wrap;
    }

    .search-box-wrapper {
      position: relative;
      display: flex;
      align-items: center;
    }

    .search-box {
      padding: 10px 35px 10px 10px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      width: 250px;
      max-width: 80vw;
    }

    .search-icon {
      position: absolute;
      right: 10px;
      cursor: pointer;
    }

    .clear-button {
      background-color: #0C234C;
      color: white;
      border: 2px solid #0C234C;
      border-radius: 8px;
      padding: 10px 16px;
      font-size: 14px;
      cursor: pointer;
      font-weight: normal;
    }

    .result-strip {
      background-color: white;
      width: 100%;
      padding: 30px 10px;
      box-sizing: border-box;
      margin-top: 30px;
    }

    .result-container {
      max-width: 400px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
      color: #0C234C;
      font-size: 16px;
    }

    .result-row {
      display: flex;
      gap: 10px;
    }

    .label {
      min-width: 90px;
      text-align: right;
    }

    .colon {
      min-width: 10px;
    }

    .value {
      flex: 1;
      text-align: left;
    }

    .home-button {
      margin: 30px auto 0;
    }

    .screen {
      display: none;
    }

    .screen.active {
      display: block;
    }
  </style>
</head>
<body>
  <div id="departmentScreen" class="screen active">
    <img src="https://thegadore-2.github.io/emp/allan_logo.jfif" class="logo" alt="Logo" />
    <h1>Payroll Deduction Meal Coupon</h1>
    <h2>Please Select Your Department</h2>

    <div class="button-grid">
      <button class="main-button" onclick="goToSearch('ECSI Direct')">ECSI Direct</button>
      <button class="main-button" onclick="goToSearch('EDDN Direct')">EDDN Direct</button>
      <button class="main-button" onclick="goToSearch('ECSI Premier')">ECSI Premier</button>
      <button class="main-button" onclick="goToSearch('EDDN Premier')">EDDN Premier</button>
      <button class="main-button" onclick="goToSearch('ECSI Good Job')">ECSI Good Job</button>
      <button class="main-button" onclick="goToSearch('EDDN Good Job')">EDDN Good Job</button>
      <button class="main-button" onclick="goToSearch('ECSI Easygen')">ECSI Easygen</button>
      <button class="main-button" onclick="goToSearch('EDDN Easygen')">EDDN Easygen</button>
    </div>

    <div class="authorization-box">
      <strong>(Canteen Credit Payroll Authorization)</strong><br />
      I hereby authorize the company to deduct from my salary or any final pay, the amount equivalent to my outstanding
      credit line/obligation with the company canteen. I understand and acknowledge that this deduction will be made
      regularly from my payroll until the full amount of my canteen credit line is paid. This authorization shall remain valid and
      in full force unless revoked by writing, provided that all obligations to the canteen have been fully settled.
    </div>
  </div>

  <div id="searchScreen" class="screen">
    <img src="https://thegadore-2.github.io/emp/allan_logo.jfif" class="logo" alt="Logo" />
    <h1>Payroll Deduction Meal Coupon</h1>

    <div class="search-bar-container">
      <div class="search-box-wrapper">
        <input type="text" class="search-box" id="idInput" placeholder="Type your ID" />
        <span class="search-icon" onclick="searchID()">üîç</span>
      </div>
      <button class="clear-button" onclick="clearInput()">Clear</button>
    </div>

    <div class="result-strip" id="resultBox" style="display: none;">
      <div class="result-container">
        <div class="result-row">
          <div class="label">Name</div>
          <div class="colon">:</div>
          <div class="value" id="resultName">Juan Dela Cruz</div>
        </div>
        <div class="result-row">
          <div class="label">Department</div>
          <div class="colon">:</div>
          <div class="value" id="selectedDept">EDDN Premier</div>
        </div>
        <div class="result-row">
          <div class="label">ID Number</div>
          <div class="colon">:</div>
          <div class="value" id="resultID">EMP123456</div>
        </div>
      </div>
    </div>

    <button class="main-button home-button" onclick="goHome()">Home</button>
  </div>

  <script>
    let selectedDepartment = '';
    let employeeList = [];

    fetch('https://thegadore-2.github.io/emp/EMP_DATA.csv')
      .then(response => response.text())
      .then(text => {
        const rows = text.trim().split('\n');
        const headers = rows[0].split(',');
        const idIndex = headers.indexOf('ID');
        const nameIndex = headers.indexOf('NAME');
        employeeList = rows.slice(1).map(row => {
          const cols = row.split(',');
          return {
            id: cols[idIndex]?.trim(),
            name: cols[nameIndex]?.trim()
          };
        });
      });

    function goToSearch(dept) {
      selectedDepartment = dept;
      document.getElementById("departmentScreen").classList.remove("active");
      document.getElementById("searchScreen").classList.add("active");
      document.getElementById("selectedDept").textContent = dept;
      clearInput();
    }

    function goHome() {
      document.getElementById("searchScreen").classList.remove("active");
      document.getElementById("departmentScreen").classList.add("active");
    }

    function clearInput() {
      document.getElementById("idInput").value = '';
      document.getElementById("idInput").focus();
      document.getElementById("resultBox").style.display = 'none';
    }

    function searchID() {
      const id = document.getElementById("idInput").value.trim();
      const result = employeeList.find(emp => emp.id === id);
      if (result) {
        document.getElementById("resultName").textContent = result.name;
        document.getElementById("resultID").textContent = result.id;
        document.getElementById("resultBox").style.display = 'block';
      } else {
        document.getElementById("resultName").textContent = 'Not found';
        document.getElementById("resultID").textContent = '';
        document.getElementById("resultBox").style.display = 'block';
      }
    }

    document.getElementById("idInput").addEventListener("keypress", function (e) {
      if (e.key === "Enter") {
        searchID();
      }
    });
  </script>
</body>
</html>
